<definition component-name="portal-Site MemberShips">
	<property name="testray.main.component.name" value="Site Memberships" />

	<set-up>
		<execute macro="TestCase#setUpPortalInstance" />

		<execute macro="User#firstLoginPG" />

		<execute macro="ProductMenu#gotoControlPanelSites">
			<var name="portlet" value="Sites" />
		</execute>

		<execute macro="Site#addBlankCP">
			<var name="siteName" value="Name Site" />
		</execute>

		<for list="1,2" param="N">
			<execute macro="ProductMenu#gotoControlPanelUsers">
				<var name="portlet" value="Users and Organizations" />
			</execute>

			<execute macro="User#addCP">
				<var name="userEmailAddress" value="userea${N}@liferay.com" />
				<var name="userFirstName" value="userfn ${N}" />
				<var name="userLastName" value="userln ${N}" />
				<var name="userScreenName" value="usersn${N}" />
			</execute>
		</for>

		<for list="1,2" param="M">
			<execute macro="ProductMenu#gotoControlPanelUsers">
				<var name="portlet" value="User Groups" />
			</execute>

			<execute macro="UserGroup#addCP">
				<var name="userGroupName" value="User Group ${M}" />
			</execute>
		</for>

			<execute macro="ProductMenu#gotoControlPanelUsers">
				<var name="portlet" value="Users and Organizations" />
			</execute>
		
			<execute macro="Organization#addCP">
				<var name="orgType" value="Organization" />
				<var name="orgName" value="Organization Name" />
			</execute>

		</set-up>

		<tear-down>
			<var method="TestPropsUtil#get('test.portal.instance')" name="testPortalInstance" />

		<if>
			<equals arg1="${testPortalInstance}" arg2="true" />
			<then>
				<execute macro="PortalInstances#tearDownCP" />
			</then>
			<else>
				<execute macro="User#tearDownCP"/>
				<execute macro="Site#tearDownCP">
				<var name="siteName" value="Site Name"/>
			</execute>
			</else>
		</if>
		</tear-down>

		<command name="AddUsersfromSiteMembershipsMenu" priority="5">
			<property name="portal.acceptance" value="true" />

			<execute macro="ProductMenu#gotoSite">
				<var name="siteName" value="Site Name"/>
			</execute>

			<execute macro="ProductMenu#gotoSitesMembers">
				<var name="portlet" value="Site Memberships"/>
			</execute>
		</command>
	</definition>
